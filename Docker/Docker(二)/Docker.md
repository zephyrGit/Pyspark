# Docker
---
Docker与虚拟机比较
作为一种轻量级的虚拟化方式，Docker在运行应用上跟传统的虚拟机方式相比具有显著优势：

Docker容器很快，启动和停止可以在秒级实现，这相比传统的虚拟机方式要快得多。
Docker容器对系统资源需求很少，一台主机上可以同时运行数千个Docker容器。
Docker通过类似Git的操作来方便用户获取、分发和更新应用镜像，指令简明，学习成本较低。
Docker通过Dockerfile配置文件来支持灵活的自动化创建和部署机制，提高工作效率。

## 为什么使用Docker

1. 更高效的利用系统资源

   容器不需要进行硬件虚拟以及运行完整操作系统等额外开销

2. 更快的启动时间

   可以做到以秒级、甚至毫秒级的启动时间

3. 一致的运行环境

   Docker的镜像提供了除内核以外完整的运行时环境，确保了应用环境的一致性

4. 持续交付和部署

   可以通过Dockerfile来进行镜像构建，并结合持续集成（Continuous Integration）系统进行集成测试，可以结合持续部署（Continuous Delivery/Deployment）系统进行自动部署

5. 更轻松的迁移

    由于Docker确保了执行环境的一致性，使得应用的迁移更加容易

6. 更轻松的维护和扩展

   Docker使用的分层存储以及镜像技术，使得应用重复部分的复用更为容易

## 基本概念

- 镜像（image）
- 容器（Container）
- 仓库（Repository）

### 镜像

操作系统分为内核和用户空间，而Docker镜像（image），相当于是一个root文件系统。

#### 分层存储

因为镜像包含操作系统完整的root文件系统，其体积往往是庞大的，因此在Docker设计时，将其设计为分层存储的架构。由多层文件系统联合组成

构建镜像时，会一层层构建，前一层是后一层的基础，每一层构建完就不会发生改变，后一层上的任何改变只发生在自己这一层

### Docker容器

镜像（image）和容器（Container）的关系像类与实例一样。容器可以被创建，启动，停止，删除，暂停等

容器的实质是进程，但与直接在宿主执行的进程不同，容器进程运行属于自己的独立的命名空间。

每一个容器运行时，是以镜像为基础层，在其上创建一个当前容器的存储层，可以称之为容器运行时读写而准备的存储层为容器存储层

容器不应该向其存储层内写入任何数据，容器存储层要保持无状态变化。所有的文件写入操作，都应使用数据卷（Volume）、或者绑定宿主目录，在这些位置的读写会跳过容器存储层，直接对宿主（或网络存储）发生读写，其性能和稳定性更高

使用数据卷后，容器可以随意删除、重启、数据不会丢失

## Docker Registry

一个Docker Registry剋包含多个仓库，每个仓库可以包含多个标签，每个标签对应一个镜像



